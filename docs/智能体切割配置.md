# 智能体切割配置指南

## 目标
创建独立于论文项目的日常管理智能体，实现：
1. 工作区完全隔离
2. 会话上下文分离
3. Git仓库独立
4. 技能和工具集定制

## 工作区结构
```
/workspace/工作/
├── projects/     # 项目管理
├── docs/        # 文档
├── scripts/     # 自动化脚本
├── config/      # 配置文件
├── temp/        # 临时文件（.gitignore忽略）
├── README.md    # 说明文档
└── .gitignore   # Git忽略规则
```

## 会话管理机制

### 1. 会话隔离策略
- **论文智能体**：只访问`/workspace/论文/`目录
- **管理智能体**：只访问`/workspace/工作/`目录
- 使用`session_id`区分不同智能体的会话上下文
- 避免跨目录文件操作

### 2. 上下文隔离配置
```yaml
# 建议的智能体配置
论文智能体:
  allowed_directories: ["/workspace/论文"]
  skills: ["git-master", "写作", "研究"]
  context_window: "论文项目相关"
  
管理智能体:
  allowed_directories: ["/workspace/工作"]
  skills: ["playwright", "dev-browser", "任务管理", "自动化"]
  context_window: "日常管理工作"
```

### 3. 会话标识符
- 论文会话：`ses_paper_*`
- 管理工作会话：`ses_work_*`
- 在会话开始时明确指定工作目录

## 技能配置建议

### 日常管理智能体核心技能
1. **任务管理**：Todo列表、优先级排序、进度跟踪
2. **文档处理**：Markdown编辑、文档整理、格式转换
3. **自动化脚本**：Shell脚本、Python脚本、定期任务
4. **浏览器自动化**：使用playwright进行网页操作、数据采集
5. **Git操作**：版本控制、分支管理、协作工作流
6. **通信工具**：邮件模板、报告生成、通知发送

### 技能加载示例
```python
# 管理智能体启动配置
delegate_task(
    category="unspecified-high",
    load_skills=["playwright", "dev-browser", "git-master"],
    prompt="处理日常管理任务..."
)
```

## Git仓库分离

### 论文项目仓库
- 路径：`/workspace/论文/视觉力学传感器企业战略转型研究-HSM/`
- 远程：https://github.com/haytham-ai-assistant/vision-force-sensor-enterprise-transformation-research
- 分支：master

### 管理工作仓库
- 路径：`/workspace/工作/`
- 远程：可创建新仓库（如`work-management`）
- 分支：main/master

## 测试验证

### 切割效果测试清单
1. ✅ 工作目录独立创建
2. ✅ Git仓库分离初始化
3. ✅ 目录权限隔离
4. ✅ 会话上下文不混用
5. ✅ 文件操作不跨边界
6. ✅ 技能加载针对性配置

### 验证脚本
```bash
#!/bin/bash
# 验证切割效果
echo "1. 检查工作目录隔离..."
ls -la /workspace/工作/

echo "2. 检查Git仓库分离..."
cd /workspace/工作 && git log --oneline -3

echo "3. 检查论文项目不受影响..."
cd /workspace/论文 && git status

echo "4. 验证目录权限..."
find /workspace -type d -name "*" | grep -E "(论文|工作)"
```

## 使用建议

### 启动管理智能体
1. 切换到工作目录：`cd /workspace/工作`
2. 明确会话标识：使用`ses_work_`前缀
3. 加载管理技能：优先使用playwright、自动化工具
4. 保持上下文纯净：避免提及论文项目内容

### 切换回论文智能体
1. 切换到论文目录：`cd /workspace/论文`
2. 明确会话标识：使用`ses_paper_`前缀
3. 加载学术技能：写作、研究、格式处理
4. 专注论文任务：不处理管理工作

## 故障排除

### 常见问题
1. **会话混淆**：明确使用不同的session_id
2. **目录越界**：设置工作目录限制
3. **技能冲突**：按需加载，避免不必要的技能
4. **上下文污染**：定期清理会话历史

### 恢复措施
- 会话隔离失败：创建新的独立会话
- 文件操作错误：使用Git回退
- 技能加载问题：检查skill配置

---
*最后更新：2026-02-12*
*配置状态：已初始化*